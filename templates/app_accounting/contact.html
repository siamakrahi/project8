{% extends "base.html" %}
{% load static %}

{% block title %}تماس با ما{% endblock %}

{% block description %}صفحه تماس با ما{% endblock %}

{% block extra_css %}
<!-- CSS های اختصاصی -->
{% endblock %}

{% block content %}
<!-- محتوای صفحه -->
<main class="fix">
    <br>
    <br>
    <br>
    <br>
    <section class="breadcrumb__area breadcrumb__bg" data-background="{% static 'assets/img/bg/breadcrumb_bg.jpg' %}">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="breadcrumb__content">
                        <h2 class="title">تماس با ما</h2>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href={% url 'home' %}>خانه</a></li>
                                <li class="breadcrumb-item active" aria-current="page">تماس با ما</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="breadcrumb__shape">
            <img src="{% static 'assets/img/images/breadcrumb_shape01.png' %}" alt="">
            <img src="{% static 'assets/img/images/breadcrumb_shape02.png' %}" alt="" class="rightToLeft">
            <img src="{% static 'assets/img/images/breadcrumb_shape03.png' %}" alt="">
            <img src="{% static 'assets/img/images/breadcrumb_shape04.png' %}" alt="">
            <img src="{% static 'assets/img/images/breadcrumb_shape05.png' %}" alt="" class="alltuchtopdown">
        </div>
    </section>
    <br>
    <section class="call-back-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="call-back-content">
                        <div class="section-title white-title mb-10">
                            <h2 class="title">ارسال پیام</h2>
                        </div>
                        <p>لطفا ابتدا حساب کاربری ایجاد کنید و در این قسمت پیام خودتان را ارسال بفرمایید.</p>
                        <div class="shape">
                            <img src="{% static 'assets/img/images/call_back_shape.png' %}" alt="" data-aos="fade-right" data-aos-delay="400">
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="call-back-form">
                        {% if messages %}
                            <div class="messages">
                                {% for message in messages %}
                                    {% if 'messaging' in message.tags %}
                                        <div class="alert alert-success">
                                            {{ message }}
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <form id="messaging-form" method="POST" action="{% url 'create_messaging' %}">
                            {% csrf_token %} 
                            <div class="form-group">
                                <textarea id="your_comment" name="your_comment" class="form-control" placeholder="پیام خود را اینجا بنویسید" rows="5"></textarea>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="text" name="name" placeholder="نام">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="email" name="email" placeholder="ایمیل">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="number" name="phone_number" placeholder="شماره تماس">
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn">ارسال پیام</button>
                        </form> 
                    </div>
                </div>
            </div>
        </div>
    </section>
    <br>
    <section class="call-back-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="call-back-content">
                        <div class="section-title white-title mb-10">
                            <h2 class="title">درخواست مشاوره</h2>
                        </div>
                        <p>لطفا ابتدا حساب کاربری ایجاد کنید و در این قسمت درخواست خودتان را ثبت بفرمایید.</p>
                        <div class="shape">
                            <img src="{% static 'assets/img/images/call_back_shape.png' %}" alt="" data-aos="fade-right" data-aos-delay="400">
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="call-back-form">
                        {% if messages %}
                            <div class="messages">
                                {% for message in messages %}
                                    {% if 'consulting' in message.tags %}
                                        <div class="alert alert-success">
                                            {{ message }}
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <form id="consulting-form" method="POST" action="{% url 'create_consulting' %}">
                            {% csrf_token %} 
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="text" name="name" placeholder="نام">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="email" name="email" placeholder="ایمیل">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-grp">
                                        <input type="number" name="phone_number" placeholder="شماره تماس">
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn">ارسال پیام</button>
                        </form> 
                    </div>
                </div>
            </div>
        </div>
    </section>    
</main>
{% endblock %}

{% block extra_js %}
<!-- JS های خاص صفحه  -->
    <script src="{% static 'assets/js/aos.js' %}"></script>
    <script>
      AOS.init({
        duration: 800,
        once: true
      });
    </script>

    <script>
        // بستن خودکار پیام‌ها پس از 5 ثانیه
        setTimeout(() => {
            document.querySelectorAll('.alert').forEach(alert => {
                alert.style.display = 'none';
            });
        }, 5000);
        
        // مدیریت کلیک روی دکمه بستن
        document.querySelectorAll('.close').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.parentElement.style.display = 'none';
            });
        });
    </script>

    {% if js_alert %}
        <script>
            alert("{{ js_alert|escapejs }}");
        </script>
    {% endif %}
{% endblock %}
